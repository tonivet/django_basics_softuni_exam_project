{% extends 'base.html' %}

{% block content %}
    <h3 class="mt-3 mb-3 text-center">Домова книга на етажната собственост</h3>
    <div class="d-flex">
      <a href="{% url 'resident-book-create' %}" class="btn btn-outline-primary ms-auto">Добави обитател</a>
    </div>
    <table class="table table-hover">
      <thead>
        <tr>
          <th scope="col">#</th>
          <th scope="col">Име</th>
          <th scope="col">Фамилия</th>
          <th scope="col">блок</th>
          <th scope="col">етаж</th>
          <th scope="col">ап.</th>
          <th scope="col">телефон</th>
          <th scope="col">email</th>
          <th scope="col">Категория</th>
          <th scope="col"></th>
        </tr>
      </thead>
      <tbody>
        {% for resident in residents %}
          <tr>
            <td>{{ forloop.counter }}</td>
            <td>{{ resident.first_name }}</td>
            <td>{{ resident.last_name }}</td> 
            <td>{{ resident.flat.building }}</td>
            <td>{{ resident.flat.floor }}</td>
            <td>{{ resident.flat.flat_number }}</td>
            <td>{{ resident.phone|default:"" }}</td>
            <td>{{ resident.email|default:"" }}</td>
            <td>{{ resident.role }}</td>
            <td><a href="{% url 'resident-book-edit' resident.id  %}"class="btn btn-outline-warning">Промени</a></td>
            <td><a href="{% url 'resident-book-delete' resident.id %}"class="btn btn-outline-danger">Изтрий</a></td>
          </tr>
        {% endfor %}
      </tbody>
  </table>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
  // Select all clickable rows
  const clickableRows = document.querySelectorAll('.clickable-row');
 
  // Add click event to each row
  clickableRows.forEach(row => {
    row.addEventListener('click', function() {
      // Get the URL from data-href attribute
      const url = this.dataset.href;
      if (url) {
        window.location.href = url; // Redirect to the URL
      }
    });
  });
});
  </script>
{% endblock %}
